%% Argus Package Dependencies - Monorepo Structure
%% Shows inter-package dependencies in the pnpm workspace

graph LR
    %% ── Frontend Layer ──
    subgraph Frontend["Frontend"]
        dashboard["@argus/dashboard<br/>(Next.js 16)"]
    end

    %% ── Backend Layer ──
    subgraph Backend["Backend"]
        slackbot["@argus/slack-bot"]
        orchestrator["@argus/agent-orchestrator"]
    end

    %% ── Core Layer ──
    subgraph Core["Core"]
        agentcore["@argus/agent-core"]
        db["@argus/db"]
    end

    %% ── Knowledge Layer ──
    subgraph KnowledgeLayer["Knowledge"]
        knowledge["@argus/knowledge"]
        personal["@argus/knowledge-personal"]
    end

    %% ── Integration Layer ──
    subgraph Integration["Integration"]
        gmail["@argus/gmail"]
        calendar["@argus/google-calendar"]
        tiktok["@argus/tiktok"]
        r2["@argus/r2-storage"]
    end

    %% ── Dependencies ──
    dashboard --> agentcore
    dashboard --> db

    slackbot --> agentcore
    slackbot --> db
    slackbot --> gmail
    slackbot --> calendar
    slackbot --> tiktok
    slackbot --> r2

    orchestrator --> agentcore
    orchestrator --> db
    orchestrator --> gmail
    orchestrator --> calendar
    orchestrator --> knowledge

    knowledge --> db
    personal --> db

    calendar --> gmail

    %% ── Styles ──
    classDef frontendStyle fill:#dbeafe,stroke:#2563eb,stroke-width:2px,color:#1e40af
    classDef backendStyle fill:#cce5ff,stroke:#004085,stroke-width:2px,color:#004085
    classDef coreStyle fill:#fff3cd,stroke:#856404,stroke-width:2px,color:#856404
    classDef knowledgeStyle fill:#e2d5f1,stroke:#6f42c1,stroke-width:2px,color:#4a235a
    classDef integrationStyle fill:#d1ecf1,stroke:#0c5460,stroke-width:2px,color:#0c5460

    class dashboard frontendStyle
    class slackbot,orchestrator backendStyle
    class agentcore,db coreStyle
    class knowledge,personal knowledgeStyle
    class gmail,calendar,tiktok,r2 integrationStyle

    style Frontend fill:none,stroke:#2563eb,stroke-width:2px,stroke-dasharray:5 5
    style Backend fill:none,stroke:#004085,stroke-width:2px,stroke-dasharray:5 5
    style Core fill:none,stroke:#856404,stroke-width:2px,stroke-dasharray:5 5
    style KnowledgeLayer fill:none,stroke:#6f42c1,stroke-width:2px,stroke-dasharray:5 5
    style Integration fill:none,stroke:#0c5460,stroke-width:2px,stroke-dasharray:5 5

# フォーマット規則

## 見出しレベル

| レベル                 | 用途                     | 例                                       |
| ---------------------- | ------------------------ | ---------------------------------------- |
| `## N. セクション名`   | 大セクション（目次対応） | `## 3. データベース: なぜ PostgreSQL か` |
| `### サブセクション名` | セクション内の区分       | `### 選択肢の比較`                       |
| `#### 関数名/概念名`   | 個別解説                 | `#### consumeSDKStream()`                |

---

## 強調ルール

| 記法               | 用途                                   | 例                                        |
| ------------------ | -------------------------------------- | ----------------------------------------- |
| `**太字**`         | 重要キーワード、パターン名、技術名     | **Feynman Technique**                     |
| `> 引用ブロック`   | 「平たく言うと」、学習目標、面接回答例 | `> **平たく言うと**: ...`                 |
| `` `コード書体` `` | 関数名、ファイル名、コマンド、設定値   | `consumeSDKStream()`                      |
| `（）`             | 初出専門用語のインライン解説           | ACID トランザクション（データ整合性保証） |

---

## テーブルの使い方

**比較表**: 行 = 比較軸、列 = 選択肢

```markdown
| 観点                      | 選択肢A | 選択肢B | 選択肢C |
| ------------------------- | ------- | ------- | ------- |
| **比較軸1**（平易な補足） | 値      | 値      | 値      |
```

- 比較軸は **太字** で強調
- 比較軸名の後に `（）` で平易な補足を入れる
- 6〜8 個の比較軸を設定し、全選択肢を同一基準で評価

**一覧表**: 1列目 = 名前、2列目 = 値/役割、3列目 = 補足

---

## コード例の掲載ルール

1. **ファイルパスをコメントで明記する**: `// packages/db/src/schema.ts`
2. **学ぶべきポイントを直後に箇条書きで添える**
3. **比較コードは NG/OK を明示する**: `// ❌ 使わない` / `// ✅ このプロジェクトの規約`
4. **コード内コメントで各行の意図を説明する**: `// ← これが重要`
5. **言語指定を正確に行う**: typescript, sql, dockerfile, json, yaml 等

---

## 「理由は N つ」パターン

理由を述べる際は数を予告し、番号付きリストで列挙する:

```markdown
**一方向依存にする理由は以下の 3 つ**:

1. **循環依存の防止**: ...
2. **独立性・再利用性の確保**: ...
3. **テスト容易性の向上**: ...
```

---

## 理解度チェックの形式

**技術選定ドキュメント**: チェックボックス形式

```markdown
### 理解度チェック

- [ ] Q1: PostgreSQL を選んだ主な理由を 3 つ挙げられるか？
- [ ] Q2: MongoDB が向いているプロジェクトの特徴を説明できるか？
- [ ] Q3: `FOR UPDATE SKIP LOCKED` がなぜタスクキューに重要かを説明できるか？
```

**コードベース解説ドキュメント**: 番号付きリスト形式

```markdown
### 理解度チェック

1. `query()` が throw ではなく `errorResult()` を返す理由を説明できるか？
2. `consumeSDKStream()` が処理する 3 種類のメッセージ型は何か？
3. `ObservationDB` インターフェースがある理由を説明できるか？
```

**質問設計の原則**:

- Q1: 基本確認（セクションの核心を再現できるか）
- Q2: 応用（比較・トレードオフを語れるか）
- Q3: 深い理解（設計判断の意図や代替案を論じられるか）
- 全問、セクション内の記述から答えが導けること（**最重要**）

---

## 面接 Q&A の形式

```markdown
### Q{N}: 「{面接官の質問}」

**回答例**:

> {技術的に正確な回答。そのまま面接で使えるスクリプト。}

**噛み砕いた説明**: {非エンジニア向けの比喩で再説明。}
```

---

## ドキュメントの末尾

```markdown
> **このドキュメントの最終更新**: {YYYY-MM-DD}
> **対応バージョン**: {プロジェクト名} {バージョン}
```

---

## パラレリズム（並列構造）のチェック

- 見出しの文法形式が統一されているか（名詞句 or 動詞句）
- リスト項目が同じ品詞で始まっているか
- 比較表の各セルが同じ粒度か

---

## 一文一義

1文に1つの主張・情報だけを含める。

```
-- NG --
この関数はデータを検証してDBに保存し、メールを送信する。

-- OK --
この関数はデータを検証する。
検証に成功すると、データをDBに保存する。
保存後、確認メールを送信する。
```

日本語の場合、1文は 40〜50 文字以内を目安にする。

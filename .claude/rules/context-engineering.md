# コンテキストエンジニアリング

## コアルール

- プロンプトに全情報を詰め込まない（ID参照 + 必要時取得）
- 大きな JSON は要約版を作成してから処理
- 全件取得→フィルタ ではなく、必要な部分だけ取得

## Human in the Loop

重要な成果物では一旦停止しユーザー確認:

- 最終組み立て前（素材確認）
- 外部 API 呼び出し前（コスト承認）
- 破壊的操作前（データ消失防止）

## フォールバック戦略

コスト順に試行: スクリプト実行 → 別API再試行 → Claudeサブエージェント（最終手段）

## 中間成果物

複数フェーズのパイプラインでは JSON で受け渡し、`.claude/agent-output/YYYYMMDD-{topic}/` に保存。

## サブエージェント委譲

5要素を必ず指定: 作業ディレクトリ、入力パス、出力パス、参照ドキュメント、完了条件
